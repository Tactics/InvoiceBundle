<?xml version="1.0" encoding="UTF-8"?>
<database defaultIdMethod="native" name="propel" package="vendor.tactics.invoice-bundle.Tactics.InvoiceBundle.lib.model" noxsd="true">    
    <table name="propel_invoice">
        <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true"/>
        <column name="number" type="INTEGER" required="true"/>
        <column name="customer_id" type="INTEGER" required="true"/>       
        <column name="customer_class" type="VARCHAR" size="255" required="true"/>
        <column name="total" type="DECIMAL" size="10" scale="2" required="true" default="0"/>
        <column name="vat" type="DECIMAL" size="10" scale="2" required="true"/>
        <column name="date" type="DATE" required="true"/>
        <column name="date_due" type="DATE" required="true"/>
        <column name="date_paid" type="DATE"/>
        <column name="status" type="VARCHAR" size="100"/>
        <column name="amount_paid" type="decimal" size="10" scale="2" required="true" default="0"/>
        <column name="structured_communication" type="VARCHAR" size="12"/>
        <column name="currency" type="VARCHAR" size="3" required="true" default="EUR"/>        
        <column name="created_at" type="TIMESTAMP"/>
        <column name="updated_at" type="TIMESTAMP"/>
        <column name="created_by" type="INTEGER"/>
        <column name="updated_by" type="INTEGER"/>
    </table>
  
    <table name="propel_invoice_item">
        <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true"/>
        <column name="invoice_id" type="INTEGER" required="true"/>
        <column name="quantity" type="INTEGER" required="true" default="1"/>
        <column name="unit_price" type="DECIMAL" size="10" scale="2" required="true"/>
        <column name="vat_id" type="INTEGER" required="true"/>
        <column name="price_ex_vat" type="DECIMAL" size="10" scale="2" required="true"/>
        <column name="price_incl_vat" type="DECIMAL" size="10" scale="2" required="true"/>
        <column name="description" type="VARCHAR" size="255" required="true"/>
        <column name="created_at" type="TIMESTAMP"/>
        <column name="updated_at" type="TIMESTAMP"/>
        <column name="created_by" type="INTEGER"/>
        <column name="updated_by" type="INTEGER"/>
        <foreign-key name="invoice_item_invoice_1" foreignTable="propel_invoice" onDelete="cascade">
            <reference local="invoice_id" foreign="id"/>
        </foreign-key>
        <foreign-key name="invoice_item_vat_1" foreignTable="propel_vat" onDelete="restrict">
            <reference local="vat_id" foreign="id"/>
        </foreign-key>
        <index>
            <index-column name="invoice_id"/>
        </index>
        <index>
            <index-column name="vat_id"/>
        </index>
    </table>
    
    <table name="propel_vat">
        <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true"/>
        <column name="name" type="VARCHAR" size="100" required="true"/>
        <column name="percentage" type="INTEGER"/>
        <column name="created_at" type="TIMESTAMP"/>
        <column name="updated_at" type="TIMESTAMP"/>
        <column name="created_by" type="INTEGER"/>
        <column name="updated_by" type="INTEGER"/>
    </table>
</database>